{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst ResolverFactory = require(\"./ResolverFactory\");\nconst NodeJsInputFileSystem = require(\"./NodeJsInputFileSystem\");\nconst CachedInputFileSystem = require(\"./CachedInputFileSystem\");\nconst nodeFileSystem = new CachedInputFileSystem(new NodeJsInputFileSystem(), 4000);\nconst nodeContext = {\n  environments: [\"node+es3+es5+process+native\"]\n};\nconst asyncResolver = ResolverFactory.createResolver({\n  extensions: [\".js\", \".json\", \".node\"],\n  fileSystem: nodeFileSystem\n});\nmodule.exports = function resolve(context, path, request, resolveContext, callback) {\n  if (typeof context === \"string\") {\n    callback = resolveContext;\n    resolveContext = request;\n    request = path;\n    path = context;\n    context = nodeContext;\n  }\n  if (typeof callback !== \"function\") {\n    callback = resolveContext;\n  }\n  asyncResolver.resolve(context, path, request, resolveContext, callback);\n};\nconst syncResolver = ResolverFactory.createResolver({\n  extensions: [\".js\", \".json\", \".node\"],\n  useSyncFileSystemCalls: true,\n  fileSystem: nodeFileSystem\n});\nmodule.exports.sync = function resolveSync(context, path, request) {\n  if (typeof context === \"string\") {\n    request = path;\n    path = context;\n    context = nodeContext;\n  }\n  return syncResolver.resolveSync(context, path, request);\n};\nconst asyncContextResolver = ResolverFactory.createResolver({\n  extensions: [\".js\", \".json\", \".node\"],\n  resolveToContext: true,\n  fileSystem: nodeFileSystem\n});\nmodule.exports.context = function resolveContext(context, path, request, resolveContext, callback) {\n  if (typeof context === \"string\") {\n    callback = resolveContext;\n    resolveContext = request;\n    request = path;\n    path = context;\n    context = nodeContext;\n  }\n  if (typeof callback !== \"function\") {\n    callback = resolveContext;\n  }\n  asyncContextResolver.resolve(context, path, request, resolveContext, callback);\n};\nconst syncContextResolver = ResolverFactory.createResolver({\n  extensions: [\".js\", \".json\", \".node\"],\n  resolveToContext: true,\n  useSyncFileSystemCalls: true,\n  fileSystem: nodeFileSystem\n});\nmodule.exports.context.sync = function resolveContextSync(context, path, request) {\n  if (typeof context === \"string\") {\n    request = path;\n    path = context;\n    context = nodeContext;\n  }\n  return syncContextResolver.resolveSync(context, path, request);\n};\nconst asyncLoaderResolver = ResolverFactory.createResolver({\n  extensions: [\".js\", \".json\", \".node\"],\n  moduleExtensions: [\"-loader\"],\n  mainFields: [\"loader\", \"main\"],\n  fileSystem: nodeFileSystem\n});\nmodule.exports.loader = function resolveLoader(context, path, request, resolveContext, callback) {\n  if (typeof context === \"string\") {\n    callback = resolveContext;\n    resolveContext = request;\n    request = path;\n    path = context;\n    context = nodeContext;\n  }\n  if (typeof callback !== \"function\") {\n    callback = resolveContext;\n  }\n  asyncLoaderResolver.resolve(context, path, request, resolveContext, callback);\n};\nconst syncLoaderResolver = ResolverFactory.createResolver({\n  extensions: [\".js\", \".json\", \".node\"],\n  moduleExtensions: [\"-loader\"],\n  mainFields: [\"loader\", \"main\"],\n  useSyncFileSystemCalls: true,\n  fileSystem: nodeFileSystem\n});\nmodule.exports.loader.sync = function resolveLoaderSync(context, path, request) {\n  if (typeof context === \"string\") {\n    request = path;\n    path = context;\n    context = nodeContext;\n  }\n  return syncLoaderResolver.resolveSync(context, path, request);\n};\nmodule.exports.create = function create(options) {\n  options = Object.assign({\n    fileSystem: nodeFileSystem\n  }, options);\n  const resolver = ResolverFactory.createResolver(options);\n  return function (context, path, request, resolveContext, callback) {\n    if (typeof context === \"string\") {\n      callback = resolveContext;\n      resolveContext = request;\n      request = path;\n      path = context;\n      context = nodeContext;\n    }\n    if (typeof callback !== \"function\") {\n      callback = resolveContext;\n    }\n    resolver.resolve(context, path, request, resolveContext, callback);\n  };\n};\nmodule.exports.create.sync = function createSync(options) {\n  options = Object.assign({\n    useSyncFileSystemCalls: true,\n    fileSystem: nodeFileSystem\n  }, options);\n  const resolver = ResolverFactory.createResolver(options);\n  return function (context, path, request) {\n    if (typeof context === \"string\") {\n      request = path;\n      path = context;\n      context = nodeContext;\n    }\n    return resolver.resolveSync(context, path, request);\n  };\n};\n\n// Export Resolver, FileSystems and Plugins\nmodule.exports.ResolverFactory = ResolverFactory;\nmodule.exports.NodeJsInputFileSystem = NodeJsInputFileSystem;\nmodule.exports.CachedInputFileSystem = CachedInputFileSystem;","map":null,"metadata":{},"sourceType":"script"}